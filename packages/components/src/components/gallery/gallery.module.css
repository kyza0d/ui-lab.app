@reference "tailwindcss";

@layer components {
  .gallery {
    --columns: var(--gallery-columns, 3);
    --gap: var(--gallery-gap, 1rem);

    display: grid;
    grid-template-columns: repeat(var(--columns), minmax(0, 1fr));
    gap: var(--gap);
  }

  /* Responsive column support */
  @media (min-width: 640px) {
    .gallery {
      --columns: var(--gallery-columns-sm, var(--gallery-columns, 3));
    }
  }

  @media (min-width: 768px) {
    .gallery {
      --columns: var(--gallery-columns-md, var(--gallery-columns-sm, var(--gallery-columns, 3)));
    }
  }

  @media (min-width: 1024px) {
    .gallery {
      --columns: var(--gallery-columns-lg, var(--gallery-columns-md, var(--gallery-columns-sm, var(--gallery-columns, 3))));
    }
  }

  @media (min-width: 1280px) {
    .gallery {
      --columns: var(--gallery-columns-xl, var(--gallery-columns-lg, var(--gallery-columns-md, var(--gallery-columns-sm, var(--gallery-columns, 3)))));
    }
  }

  .item {
    --background: var(--background-950);
    --border: var(--background-700);
    --border-hover: var(--background-600);
    --border-focus: var(--accent-500);

    display: flex;
    flex-direction: column;
    background-color: var(--background);
    border: var(--border-width-base) solid var(--border);
    border-radius: var(--radius-lg);
    overflow: hidden;
    text-decoration: none;
    color: inherit;
    cursor: pointer;
    transition: border-color 150ms ease, box-shadow 150ms ease;

    &:focus {
      outline: none;
    }
  }

  .item[data-focus-visible] {
    outline: 2px solid var(--border-focus);
    outline-offset: 2px;
  }

  .item[data-hovered] {
    border-color: var(--border-hover);
  }

  .item[data-pressed] {
    border-color: var(--border-focus);
  }

  .view {
    --aspect-ratio: var(--gallery-aspect-ratio, 16/9);
    --background: var(--background-950);

    position: relative;
    aspect-ratio: var(--aspect-ratio);
    background-color: var(--background);
    overflow: hidden;

    /* Ensure images/videos fill the container */
    & > img,
    & > video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  }

  .body {
    @apply p-3;

    display: flex;
    flex-direction: column;
    gap: 0.25rem;

    /* Typography hierarchy */
    & > :first-child {
      font-weight: 500;
      color: var(--foreground-50);
    }

    & > :not(:first-child) {
      font-size: var(--text-sm);
      color: var(--foreground-300);
    }
  }
}
